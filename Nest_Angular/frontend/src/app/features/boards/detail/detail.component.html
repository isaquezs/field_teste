<div class="kb-board-header">
    <button
      mat-fab
      [routerLink]="['/boards']"
      color="primary"
      aria-label="Back to boards"
    >
      <mat-icon>arrow_back</mat-icon>
    </button>
  
    <h1 class="kb-board-title">{{ board()?.nome }}</h1>
  </div>
  
  <!-- Lists should come from swimlanes for the board -->
  
  <div
    cdkDropListGroup
    cdkDropList
    cdkDropListOrientation="horizontal"
    (cdkDropListDropped)="aoMudarSwimlane($event)"
    class="swimlanes-wrapper"
  >
    @for(swimlane of board()?.swimlanes; track swimlane) {
    <div class="swimlane" cdkDrag>
      <div class="swimlane-header" cdkDragHandle>
        <h2>{{ swimlane.nome }}</h2>
        <div>
          <button
            color="secondary"
            mat-stroked-button
            (click)="editSwimlane(swimlane)"
          >
            Edit
          </button>
        </div>
      </div>
  
      <div class="swimlane-inner">
        <div
          class="swimlane-inner__dragzone"
          cdkDropList
          cdkDropListOrientation="vertical"
          [cdkDropListData]="swimlane.cards"
          (cdkDropListDropped)="aoMudarCard($event, swimlane)"
        >
          @for(card of swimlane.cards; track card) {
          <button
            class="swimlane__card"
            (click)="adicionarOuEditarCard(swimlane, card)"
            cdkDrag
          >
            {{ card.nome }}
          </button>
          }
        </div>
      </div>
      <button (click)="adicionarOuEditarCard(swimlane)" mat-button>Add card</button>
    </div>
    }
    <div class="swimlane">
      <h2>Nova Seção</h2>
      <div class="swimlane-inner">
        <form [formGroup]="swimlaneForm">
          <mat-form-field>
            <mat-label>Nome</mat-label>
            <input matInput formControlName="nome" placeholder="Ex. Todo" />
  
            @if (!swimlaneForm.controls.nome.hasError('required')) {
            <mat-error>Please enter a valid name</mat-error>
            } </mat-form-field
          ><br />
          <button (click)="addSwimlane()" color="primary" mat-flat-button>
            Add swimlane
          </button>
        </form>
      </div>
    </div>
  </div>